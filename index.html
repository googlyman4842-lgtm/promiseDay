<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise Day | Forever Yours</title>
    <style>
        :root { --gold: #fbbf24; --gold-glow: rgba(251, 191, 36, 0.4); --deep: #020617; }
        body { margin: 0; height: 100vh; background: var(--deep); color: white; font-family: 'Georgia', serif; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        /* Shimmering Particle Background */
        canvas { position: absolute; top: 0; left: 0; z-index: 1; }

        .container { 
            position: relative; z-index: 10; 
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(20px); 
            padding: 40px 25px; 
            border-radius: 50px; 
            border: 1px solid var(--gold); 
            text-align: center; 
            width: 85%; max-width: 380px; 
            box-shadow: 0 0 50px var(--gold-glow);
        }

        /* --- MAGIC PINKY PROMISE --- */
        .promise-visual { height: 160px; position: relative; display: flex; justify-content: center; align-items: center; }
        .hand { font-size: 85px; filter: drop-shadow(0 0 10px var(--gold)); transition: 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .hand.l { transform: rotate(15deg) translateX(15px); }
        .hand.r { transform: rotate(-15deg) translateX(-15px) scaleX(-1); }
        
        .locked .hand.l { transform: rotate(0deg) translateX(35px); }
        .locked .hand.r { transform: rotate(0deg) translateX(-35px) scaleX(-1); }
        
        .glow-ring { 
            position: absolute; width: 100px; height: 100px; 
            border: 2px solid var(--gold); border-radius: 50%; 
            opacity: 0; transition: 0.5s; 
        }
        .locked .glow-ring { opacity: 1; transform: scale(1.5); box-shadow: 0 0 30px var(--gold); }

        h2 { color: var(--gold); letter-spacing: 2px; text-transform: uppercase; margin: 15px 0 5px; }
        #status-text { font-style: italic; color: #d1d5db; min-height: 50px; margin-bottom: 20px; font-size: 0.95rem; }

        input { 
            width: 85%; padding: 16px; border-radius: 25px; border: 1px solid var(--gold); 
            background: rgba(0,0,0,0.6); color: white; outline: none; margin-bottom: 20px;
            text-align: center; font-size: 1rem;
        }

        .btn { 
            background: linear-gradient(45deg, #d97706, #fbbf24); 
            color: #000; padding: 18px; border: none; border-radius: 50px; 
            width: 100%; font-weight: bold; cursor: pointer; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.3); transition: 0.3s;
        }
        .btn:active { transform: scale(0.98); }

        #final-screen { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--deep); display: none; flex-direction: column; 
            align-items: center; justify-content: center; z-index: 100; text-align: center;
        }
    </style>
</head>
<body onclick="initMagic()">

<canvas id="canvas"></canvas>

<div class="container" id="main-ui">
    <div class="promise-visual" id="visual">
        <div class="glow-ring"></div>
        <span class="hand l">ü§ô</span>
        <span class="hand r">ü§ô</span>
    </div>

    <h2>Promise Day</h2>
    <p id="status-text">Touch the golden ring to begin...</p>

    <input type="text" id="pInput" placeholder="Write a promise to me...">
    <button class="btn" onclick="handlePromise()">LOCK OUR PROMISE ‚ú®</button>
</div>

<div id="final-screen">
    <div style="font-size: 100px; filter: drop-shadow(0 0 20px var(--gold));">ü§ù‚ù§Ô∏è</div>
    <h1 style="color: var(--gold);">Forever Starts Today</h1>
    <p style="padding: 0 40px; line-height: 1.8; font-size: 1.1rem; color: #e5e7eb;">
        "I promise to be your strength when you are weak, your voice when you are quiet, and your heart when you feel alone. Every breath I take is a promise to love you more."
    </p>
    <button class="btn" style="width: auto; padding: 15px 50px;" onclick="location.reload()">Locked Forever ‚ú®</button>
</div>

<script>
    // Particle System
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    let particles = [];

    class Particle {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 2;
            this.speedX = Math.random() * 0.5 - 0.25;
            this.speedY = Math.random() * 0.5 - 0.25;
        }
        update() {
            this.x += this.speedX; this.y += this.speedY;
            if(this.x > canvas.width) this.x = 0; if(this.x < 0) this.x = canvas.width;
            if(this.y > canvas.height) this.y = 0; if(this.y < 0) this.y = canvas.height;
        }
        draw() {
            ctx.fillStyle = '#fbbf24'; ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
        }
    }
    for(let i=0; i<80; i++) particles.push(new Particle());
    function animate() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();

    // Voice & Logic
    let isStarted = false;
    let count = 0;
    const beautifulPromises = [
        "I promise to always pick you, every single day, without a doubt.",
        "I promise to listen to your silence when words are too much.",
        "I promise to hold your hand through the storms and the sunshine.",
        "I promise that my heart will always be your home."
    ];

    function speak(text) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        msg.pitch = 0.9; msg.rate = 0.85; // Deep, calm voice
        window.speechSynthesis.speak(msg);
    }

    function initMagic() {
        if(!isStarted) {
            speak("Happy Promise Day, my Queen. Today, words become bonds. Give me three promises to lock our destiny.");
            document.getElementById('status-text').innerText = "I promise to cherish you forever...";
            isStarted = true;
        }
    }

    function handlePromise() {
        const input = document.getElementById('pInput');
        if(!input.value) return;

        count++;
        const visual = document.getElementById('visual');
        visual.classList.add('locked');

        // Speak back her promise + a beautiful one from you
        const myReply = beautifulPromises[count-1];
        speak("You promised: " + input.value + ". And in return, " + myReply);
        document.getElementById('status-text').innerText = myReply;

        // Formspree
        fetch("https://formspree.io/f/mjgeklvr", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ Her_Promise: input.value, My_Reply: myReply })
        });

        setTimeout(() => {
            visual.classList.remove('locked');
            input.value = "";
            if(count >= 3) {
                setTimeout(() => {
                    document.getElementById('main-ui').style.display = 'none';
                    document.getElementById('final-screen').style.display = 'flex';
                    speak("Happy Promise Day. Our souls are now tied by these words. I love you.");
                }, 1500);
            }
        }, 3000);
    }
</script>

</body>
</html>
